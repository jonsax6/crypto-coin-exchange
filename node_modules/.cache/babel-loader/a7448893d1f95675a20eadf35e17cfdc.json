{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/jonathancole/Documents/GitHub/coin-exchange/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport AccountBalance from './components/AccountBalance';\nimport { v4 as uuidv4 } from 'uuid';\nimport CoinList from './components/CoinList';\nimport ExchangeHeader from './components/ExchangeHeader';\nimport styled from 'styled-components';\nimport axios from 'axios';\nconst Div = styled.div`\n  text-align: center;\n  background-color: rgb(20, 56, 97);\n  color: #cccccc;\n`;\n_c = Div;\nconst COIN_COUNT = 20;\n\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\nfunction App(props) {\n  _s();\n\n  const [balance, setBalance] = useState(10000);\n  const [showBalance, setShowBalance] = useState(true);\n  const [coinData, setCoinData] = useState([]);\n\n  const componentDidMount = async () => {\n    const response = await axios.get('https://api.coinpaprika.com/v1/coins');\n    const coinIds = response.data.slice(0, COIN_COUNT).map(coin => coin.id);\n    const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n    const promises = coinIds.map(id => axios.get(tickerUrl + id));\n    const coinData = await Promise.all(promises);\n    debugger;\n    const coinPriceData = coinData.map(response => {\n      const coin = response.data;\n      return {\n        key: coin.id,\n        name: coin.name,\n        ticker: coin.symbol,\n        balance: 0,\n        price: formatPrice(coin.quotes.USD.price)\n      };\n    });\n    setCoinData(coinPriceData);\n  };\n\n  useEffect(() => {\n    if (coinData.length === 0) {\n      componentDidMount();\n    }\n  });\n\n  const handleBalanceVisibilityChange = () => {\n    setShowBalance(oldValue => !oldValue);\n  };\n\n  const handleRefresh = async valueChangeId => {\n    const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n    const response = await axios.get(tickerUrl);\n    const newPrice = formatPrice(response.data.quotes.USD.price);\n    const newCoinData = coinData.map(function (values) {\n      let newValues = { ...values\n      };\n\n      if (valueChangeId === values.ticker) {\n        newValues.price = newPrice;\n      }\n\n      return newValues;\n    });\n    setCoinData(newCoinData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Div, {\n    children: [/*#__PURE__*/_jsxDEV(ExchangeHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AccountBalance, {\n      amount: balance,\n      showBalance: showBalance,\n      handleBalanceVisibilityChange: handleBalanceVisibilityChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CoinList, {\n      coinData: coinData,\n      handleRefresh: handleRefresh,\n      showBalance: showBalance\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"ZGXj4JgR/sr5RT1QVhqPlCQ8Bs8=\");\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Div\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["/Users/jonathancole/Documents/GitHub/coin-exchange/src/App.js"],"names":["React","useState","useEffect","AccountBalance","v4","uuidv4","CoinList","ExchangeHeader","styled","axios","Div","div","COIN_COUNT","formatPrice","price","parseFloat","Number","toFixed","App","props","balance","setBalance","showBalance","setShowBalance","coinData","setCoinData","componentDidMount","response","get","coinIds","data","slice","map","coin","id","tickerUrl","promises","Promise","all","coinPriceData","key","name","ticker","symbol","quotes","USD","length","handleBalanceVisibilityChange","oldValue","handleRefresh","valueChangeId","newPrice","newCoinData","values","newValues"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport AccountBalance from './components/AccountBalance'\nimport { v4 as uuidv4 } from 'uuid'\nimport CoinList from './components/CoinList';\nimport ExchangeHeader from './components/ExchangeHeader';\nimport styled from 'styled-components';\nimport axios from 'axios';\n\nconst Div = styled.div`\n  text-align: center;\n  background-color: rgb(20, 56, 97);\n  color: #cccccc;\n`;\n\nconst COIN_COUNT = 20;\nconst formatPrice = price => parseFloat(Number(price).toFixed(3));\n\nfunction App(props) {\n  const [balance, setBalance] = useState(10000);\n  const [showBalance, setShowBalance] = useState(true);\n  const [coinData, setCoinData] = useState([]);\n\n  const componentDidMount = async () => {\n    const response = await axios.get('https://api.coinpaprika.com/v1/coins')\n    const coinIds = response.data.slice(0, COIN_COUNT).map( coin => coin.id);\n    const tickerUrl = 'https://api.coinpaprika.com/v1/tickers/';\n    const promises = coinIds.map(id => axios.get(tickerUrl + id));\n    const coinData = await Promise.all(promises);\n    debugger;\n    const coinPriceData = coinData.map( response => {\n      const coin = response.data;\n      return {\n        key: coin.id,\n        name: coin.name,\n        ticker: coin.symbol,\n        balance: 0,\n        price: formatPrice(coin.quotes.USD.price),\n      };\n    })\n    setCoinData(coinPriceData);\n  }\n\nuseEffect(() => {\n  if(coinData.length === 0) {\n    componentDidMount();\n  } \n});\n\n  const handleBalanceVisibilityChange = () => {\n    setShowBalance(oldValue => !oldValue);\n  }\n\n  const handleRefresh = async (valueChangeId) => {\n    const tickerUrl = `https://api.coinpaprika.com/v1/tickers/${valueChangeId}`;\n    const response = await axios.get(tickerUrl);\n    const newPrice = formatPrice(response.data.quotes.USD.price);\n    const newCoinData = coinData.map( function(values) {\n      let newValues = { ...values };\n\n      if(valueChangeId === values.ticker) {\n        newValues.price = newPrice;\n      }\n      return newValues;\n    });\n    setCoinData(newCoinData);\n  }\n\n  return (\n    <Div>\n      <ExchangeHeader />\n      <AccountBalance \n        amount={balance} \n        showBalance={showBalance} \n        handleBalanceVisibilityChange={handleBalanceVisibilityChange} />\n      <CoinList \n        coinData={coinData} \n        handleRefresh={handleRefresh} \n        showBalance={showBalance}/>\n    </Div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}